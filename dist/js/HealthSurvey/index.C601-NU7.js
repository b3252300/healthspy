import{z as e,q as a,v as t,H as l,J as o,G as s,N as n,O as r,M as u,F as i,a0 as v,b as c,c as d,n as m,r as b,V as p,S as f,P as h,_ as C}from"../@vue/@vue.CISUW6gm.js";import{L as x}from"../Loading/Loading.Kc0FP4fC.js";import{Q as y,A as _,a as g}from"../QuestionCard/QuestionCard.CFg0l9jm.js";import{a as k,u as j}from"../vue-router/vue-router.DzNGWVxd.js";import{_ as w,F as S}from"../../assets/index-BGBnUB5j.js";import"../pinia/pinia.BbQN6uKc.js";import"../js-cookie/js-cookie.BXEMiIsG.js";import"../bootstrap/bootstrap.B479eVIA.js";import"../@popperjs/@popperjs.CDLgd9d9.js";import"../clipboard/clipboard.BDF08mEv.js";import"../vue3-lottie/vue3-lottie.CcJZhO04.js";import"../lottie-web/lottie-web.CrP6allm.js";const I={class:"bg_HealthSurvey_color"},Q={key:0,class:"d-flex flex-column justify-content-center align-items-center m-3 noData_container"},H={ref:"formline",class:"form_container",novalidate:""},O=["id"],$={class:"form-label"},E={key:0,class:"showError-feedback"},q={class:"box-check"},V=["name","id","value","onUpdate:modelValue","onChange"],R=["for"],D={class:"submit_container"},F={class:"bar_content"},L=["max","value"],M={class:"bar_content-text"},N={key:1,class:"arrows_content"},T=w({__name:"index",setup(w){j();const T=k(),A=c(!0),J=c(null),U=c(!1),z=c(""),B=c(!1),G=c([]),K=c(null),P=c({}),W=b({}),X=c(!1),Y=d(()=>({max:G.value.length,min:Object.keys(W).length})),Z=()=>{X.value=!0,K.value&&K.value.scrollIntoView({behavior:"smooth",block:"start"})},ee=b([{label:"從來沒有",val:1},{label:"偶爾",val:2},{label:"經常",val:3},{label:"很常",val:4},{label:"總是",val:5}]);A.value=!1,setTimeout(()=>{G.value=[{Code:"Q1",Context:"我每天都有固定吃早餐的習慣"},{Code:"Q2",Context:"我每週至少會運動 3 次，每次 30 分鐘以上"},{Code:"Q3",Context:"我每天喝水量有達到 2000cc 以上"},{Code:"Q4",Context:"我每天睡眠時間有達到 7 至 8 小時"},{Code:"Q5",Context:"我會攝取足夠的蔬菜與水果（天天五蔬果）"},{Code:"Q6",Context:"我會避免攝取含糖飲料或高熱量零食"},{Code:"Q7",Context:"我感到心情愉悅，能有效排解壓力"},{Code:"Q8",Context:"我有良好的排便習慣（每天或每兩天一次）"},{Code:"Q9",Context:"我避免在睡前一小時使用手機或電子產品"},{Code:"Q10",Context:"我會定期進行身體健康檢查"}],0===G.value.length&&(B.value=!0),A.value=!0},800);const ae=()=>{let e=!0;return P.value={},G.value.forEach((a,t)=>{W[t]&&null!=W[t]||(P.value[t]=!0,e=!1)}),e};e(()=>{(()=>{const e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?X.value=!0:X.value=!1})},{root:null,rootMargin:"0px",threshold:.01});K.value&&e.observe(K.value),v(()=>{K.value&&e.unobserve(K.value)})})()});const te=()=>{ae();const e=G.value.findIndex((e,a)=>void 0===W[a]);-1!==e&&se(e)},le=()=>{ae(),m(()=>{let e=[...G.value].findIndex((e,a)=>void 0===W[G.value.length-1-a]);-1!==e&&(e=G.value.length-1-e,se(e))})},oe=()=>{if(!ae())return void te();A.value=!1;const e=c([]);Object.entries(W).forEach(a=>{let t={Code:"Q"+(parseInt(a[0])+1),Answer:a[1]};e.value.push(t)}),setTimeout(()=>{console.log("模擬送出資料:",e.value);let a=0;Object.values(W).forEach(e=>a+=e);const t={answers:W,totalScore:a,date:(new Date).toISOString()};sessionStorage.setItem("SurveyResult",JSON.stringify(t)),A.value=!0,T.push({path:"/member/HealthSurvey/Result"})},1e3)},se=e=>{const a=document.getElementById(`question-${e}`);a&&a.scrollIntoView({behavior:"smooth",block:"start"})};function ne(e){U.value=e}return(e,v)=>(a(),t(i,null,[l(x,{IsShow:A.value},null,8,["IsShow"]),l(S,{ref_key:"Failedref",ref:J,IsShow:U.value,Content:z.value,onClose:ne},null,8,["IsShow","Content"]),o("div",I,[o("div",{class:"banner"},[o("div",null,[v[0]||(v[0]=o("img",{src:"/healthspy/assets/img_HealthSurvey-CHjNTsDn.png",alt:"健康分數評估"},null,-1)),o("a",{class:"btn btn-spy",onClick:Z,style:{"max-width":"284px"}},"開始檢測")])]),o("div",{id:"HealthSurvey",ref_key:"HealthSurvey",ref:K,style:{"padding-top":"8px"}},[l(y,null,{title:s(()=>[...v[1]||(v[1]=[h(" 健康分數問卷 ",-1)])]),default:s(()=>[B.value?(a(),t("div",Q,[...v[2]||(v[2]=[o("div",{class:"mt-3"},"沒有資料",-1)])])):p("",!0),o("form",H,[(a(!0),t(i,null,f(G.value,(e,l)=>(a(),t("div",{key:l,class:"form_container_div",id:`question-${l}`},[o("label",$,[h(u(l+1<10?"0"+(l+1):l+1)+" "+u(e.Context)+" ",1),P.value[l]?(a(),t("div",E,"必填項目 ")):p("",!0)]),(a(!0),t(i,null,f(ee,(e,s)=>(a(),t("div",{class:"form-check",key:s},[o("div",q,[n(o("input",{class:"form-check-input",type:"radio",name:`question-${l}`,id:`inlineRadio-${l}-${s}`,value:e.val,"onUpdate:modelValue":e=>W[l]=e,onChange:e=>(e=>{W[e]&&(P.value[e]=!1)})(l),autocomplete:"off",required:""},null,40,V),[[C,W[l]]]),o("label",{class:"form-check-label btn btn-secondar box_check",for:`inlineRadio-${l}-${s}`},u(e.label),9,R)])]))),128))],8,O))),128))],512)]),_:1})],512),n(o("div",D,[o("div",F,[o("progress",{class:"progress_class",max:Y.value.max,value:Y.value.min},null,8,L),o("span",M,u(Y.value.min)+" / "+u(Y.value.max),1)]),Y.value.min==Y.value.max?(a(),t("button",{key:0,class:"btn btn_submit",type:"submit",onClick:oe},"查看結果")):(a(),t("div",N,[o("button",{class:"btn_arrows",type:"button",onClick:le},[l(_)]),o("button",{class:"btn_arrows",type:"button",onClick:te},[l(g)])]))],512),[[r,X.value]])])],64))}},[["__scopeId","data-v-c8e15044"]]);export{T as default};
