import{L as a}from"../Loading/Loading.Da43D_ay.js";import{C as t}from"../Card/Card.Brnj5rYh.js";import{h as e}from"../request/request.DS25iEu1.js";import{C as l}from"../chart.js/chart.js.CUPFkRqv.js";import"../moment/moment.gyA2PHTf.js";import{r as s,w as o,z as i,q as n,v as r,b as u,H as d,J as v,F as p,S as c,U as f,M as C,D as h,u as m,V as y,n as b,$ as D,x as g,G as k,P as w,c as _}from"../@vue/@vue.CISUW6gm.js";import{u as j}from"../date/date.okVTOcjA.js";import{_ as x,F as M}from"../../assets/index-Ba86HNo9.js";import"../crypto-js/crypto-js.7wHo0WA-.js";import"../EncryptStorage/EncryptStorage.CPcoWq5g.js";import"../axios/axios.CmLmLvTV.js";import"../pinia/pinia.BbQN6uKc.js";import"../@kurkle/@kurkle.Bud0EmM2.js";import"../vue-router/vue-router.B-TQU50p.js";import"../js-cookie/js-cookie.BXEMiIsG.js";import"../bootstrap/bootstrap.B479eVIA.js";import"../@popperjs/@popperjs.CDLgd9d9.js";import"../clipboard/clipboard.BDF08mEv.js";import"../vue3-lottie/vue3-lottie.CcJZhO04.js";import"../lottie-web/lottie-web.CrP6allm.js";import"../encrypt-storage/encrypt-storage.Bu0T6VU1.js";const S={__name:"LineChat",props:{Date:{type:Array,default:()=>[]},Scale:{type:Array,default:()=>[]}},setup(a){const t=u(null);let e=null;const d=a,v=s({labels:d.Date,datasets:[{data:d.Scale,borderColor:"#057AFF",backgroundColor:"rgba(5, 122, 255, 0.4)",pointStyle:"circle",borderWidth:1,pointRadius:4,pointHoverRadius:4,height:146}]}),p=()=>{e&&e.destroy();const a=t.value.getContext("2d");e=new l(a,{type:"line",data:v,options:{responsive:!0,scales:{x:{ticks:{align:"center",font:{size:11,weight:400,family:"Noto Sans TC"},color:"#969696",padding:8,maxRotation:0,minRotation:0}},y:{display:!0,title:{display:!0,text:"",rotation:-90},ticks:{font:{size:11,weight:500,family:"Noto Sans TC"},color:"#2D2D2D"},suggestedMin:0,suggestedMax:100}},plugins:{legend:{display:!1},title:{display:!1}}}})};return o(()=>[d.Date,d.Scale],([a,t])=>{v.labels=a,v.datasets[0].data=t,p()},{deep:!0}),i(()=>{p()}),(a,e)=>(n(),r("canvas",{ref_key:"chartRef",ref:t,style:{width:"100%"}},null,512))}},L={ref:"offcanvasBottom",class:"offcanvas offcanvas-bottom offcanvas_container",tabindex:"-1",id:"offcanvasBottom","aria-labelledby":"offcanvasBottomLabel"},V={class:"offcanvas-body"},R={class:"nav_bar"},H=["onClick"],Z={class:"offcanvas_content"},I={class:"card-content-image"},A=x({__name:"OffcanvasBottom",setup(t){const{GetDateYYYYMMDD:l}=j(),s=u(null),o=u({}),b=u([]),D=u(!1),g=u(""),k=u(null),w=u(!1);return i(()=>{var a;(a={},e.request({method:"post",url:"/api/FrontendDiseaseRisk/GetRiskHistory",data:a})).then(a=>{const{code:t,data:e,message:l}=a;w.value&&(w.value=!1),0===t&&e?(o.value=e,b.value=Object.keys(o.value).filter(a=>Array.isArray(o.value[a])&&o.value[a].length>0).map(a=>({label:"Diabetes"===a?"糖尿病":"Hypertension"===a?"高血壓":"CAD"===a?"冠心病":"Stroke"===a?"腦中風":"MACE"===a?"心血管不良事件":a,value:a})),console.log("navList:",b.value),b.value.length>0&&(s.value=b.value[0].value)):(D.value=!0,g.value=l)}).finally(()=>{w.value=!0})}),(t,e)=>(n(),r(p,null,[d(a,{IsShow:w.value},null,8,["IsShow"]),d(M,{ref_key:"Failedref",ref:k,IsShow:D.value,Content:g.value,onClose:t.FailedClose},null,8,["IsShow","Content","onClose"]),v("div",L,[e[2]||(e[2]=v("div",{class:"offcanvas-header"},[v("h5",{class:"offcanvas-title",id:"offcanvasBottomLabel"},"最近五次的風險值")],-1)),v("div",V,[v("div",R,[(n(!0),r(p,null,c(b.value,a=>(n(),r("div",{key:a.value,class:f(["nav_bar_li",{active:s.value===a.value}]),onClick:t=>s.value=a.value},C(a.label),11,H))),128))]),v("div",Z,[v("div",I,[e[0]||(e[0]=v("div",{class:"card-content-text"},"風險機率值",-1)),s.value&&o.value[s.value]?(n(),h(S,{key:0,Date:o.value[s.value].map(a=>m(l)(a.ExamineDate)),Scale:o.value[s.value].map(a=>a.Value)},null,8,["Date","Scale"])):y("",!0)])]),e[1]||(e[1]=v("button",{type:"button",class:"btn btn-outline-primaryblue",style:{width:"calc(100% - 40px)"},"data-bs-dismiss":"offcanvas","aria-label":"Close"}," 返回 ",-1))])],512)],64))}},[["__scopeId","data-v-ac4312ce"]]),B=x({__name:"Rate",props:{ratingsNum:{type:String,default:0}},setup(a){const t=u(null),e=u("0px"),l=u({sony:a.ratingsNum});function s(a){return`${a}%`}return i(()=>{b(()=>{t.value&&(e.value=t.value.map(a=>(null==a?void 0:a.offsetWidth)+"px"||0),window.innerWidth<=767&&window.addEventListener("resize",()=>{e.value=t.value.map(a=>(null==a?void 0:a.offsetWidth)+"px"||0)}))})}),(a,o)=>(n(),r("div",null,[(n(!0),r(p,null,c(l.value,(a,l)=>(n(),r("div",{key:l,class:"rating-container"},[v("div",{class:"stars-outer",ref_for:!0,ref_key:"outerIcon",ref:t},[(n(),r(p,null,c(10,a=>v("svg",{key:`outer-${a}`,class:"star",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 33 33",fill:"#D9D9D9",width:"33",height:"33"},[...o[0]||(o[0]=[D('<path d="M19.7556 5.40802C19.7556 7.2503 18.2988 8.74377 16.5018 8.74377C14.7048 8.74377 13.2481 7.2503 13.2481 5.40802C13.2481 3.56573 14.7048 2.07227 16.5018 2.07227C18.2988 2.07227 19.7556 3.56573 19.7556 5.40802Z" fill="#D9D9D9" data-v-67013d99></path><path d="M12.3785 15.2235C12.3785 14.0567 13.3013 13.1107 14.4397 13.1107C15.5781 13.1107 16.501 14.0567 16.501 15.2235V30.2152C16.501 31.3821 15.5781 32.328 14.4397 32.328C13.3013 32.328 12.3785 31.3821 12.3785 30.2152V15.2235Z" fill="#D9D9D9" data-v-67013d99></path><path d="M16.7753 15.2235C16.7753 14.0567 17.6982 13.1107 18.8366 13.1107C19.975 13.1107 20.8979 14.0567 20.8979 15.2235V30.2152C20.8979 31.3821 19.975 32.328 18.8366 32.328C17.6982 32.328 16.7753 31.3821 16.7753 30.2152V15.2235Z" fill="#D9D9D9" data-v-67013d99></path><path d="M10.5084 11.9867C10.7407 11.0704 11.6538 10.5207 12.5477 10.759C13.4417 10.9972 13.978 11.9332 13.7457 12.8495L11.9004 20.1266C11.668 21.0429 10.755 21.5926 9.86101 21.3543C8.96705 21.1161 8.43072 20.1801 8.66308 19.2637L10.5084 11.9867Z" fill="#D9D9D9" data-v-67013d99></path><path d="M22.4941 11.9867C22.2617 11.0704 21.3487 10.5207 20.4547 10.759C19.5608 10.9972 19.0244 11.9332 19.2568 12.8495L21.1021 20.1266C21.3344 21.0429 22.2475 21.5926 23.1415 21.3543C24.0354 21.1161 24.5718 20.1801 24.3394 19.2637L22.4941 11.9867Z" fill="#D9D9D9" data-v-67013d99></path><path d="M10.5559 12.2735C10.5559 10.7545 11.7572 9.5231 13.2392 9.5231H19.7694C21.2513 9.5231 22.4527 10.7545 22.4527 12.2735V15.0136C22.4527 16.5326 21.2513 17.764 19.7694 17.764H13.2392C11.7572 17.764 10.5559 16.5326 10.5559 15.0136V12.2735Z" fill="#D9D9D9" data-v-67013d99></path><path d="M15.1825 16.0527H18.1702V21.4845H15.1825V16.0527Z" data-v-67013d99></path>',7)])])),64))],512),v("div",{class:"stars-position",style:g({width:s(a)})},[v("div",{class:"stars-inner",style:g({width:e.value})},[(n(),r(p,null,c(10,a=>v("svg",{key:`inner-${a}`,class:"star",width:"33",height:"33",viewBox:"0 0 33 33",fill:"#008CD6",xmlns:"http://www.w3.org/2000/svg"},[...o[1]||(o[1]=[D('<path d="M19.5559 5.40802C19.5559 7.2503 18.0991 8.74377 16.3021 8.74377C14.5051 8.74377 13.0484 7.2503 13.0484 5.40802C13.0484 3.56573 14.5051 2.07227 16.3021 2.07227C18.0991 2.07227 19.5559 3.56573 19.5559 5.40802Z" fill="#008CD6" data-v-67013d99></path><path d="M12.1787 15.2235C12.1787 14.0567 13.1016 13.1107 14.24 13.1107C15.3784 13.1107 16.3013 14.0567 16.3013 15.2235V30.2152C16.3013 31.3821 15.3784 32.328 14.24 32.328C13.1016 32.328 12.1787 31.3821 12.1787 30.2152V15.2235Z" fill="#008CD6" data-v-67013d99></path><path d="M16.5756 15.2235C16.5756 14.0567 17.4985 13.1107 18.6369 13.1107C19.7753 13.1107 20.6982 14.0567 20.6982 15.2235V30.2152C20.6982 31.3821 19.7753 32.328 18.6369 32.328C17.4985 32.328 16.5756 31.3821 16.5756 30.2152V15.2235Z" fill="#008CD6" data-v-67013d99></path><path d="M10.3087 11.9867C10.541 11.0704 11.4541 10.5207 12.348 10.759C13.242 10.9972 13.7783 11.9332 13.546 12.8495L11.7007 20.1266C11.4683 21.0429 10.5553 21.5926 9.6613 21.3543C8.76734 21.1161 8.23101 20.1801 8.46337 19.2637L10.3087 11.9867Z" fill="#008CD6" data-v-67013d99></path><path d="M22.2944 11.9867C22.062 11.0704 21.149 10.5207 20.255 10.759C19.3611 10.9972 18.8247 11.9332 19.0571 12.8495L20.9024 20.1266C21.1347 21.0429 22.0478 21.5926 22.9418 21.3543C23.8357 21.1161 24.372 20.1801 24.1397 19.2637L22.2944 11.9867Z" fill="#008CD6" data-v-67013d99></path><path d="M10.3562 12.2735C10.3562 10.7545 11.5575 9.5231 13.0395 9.5231H19.5696C21.0516 9.5231 22.253 10.7545 22.253 12.2735V15.0136C22.253 16.5326 21.0516 17.764 19.5696 17.764H13.0395C11.5575 17.764 10.3562 16.5326 10.3562 15.0136V12.2735Z" fill="#008CD6" data-v-67013d99></path><path d="M14.9828 16.0527H17.9705V21.4845H14.9828V16.0527Z" data-v-67013d99></path>',7)])])),64))],4)],4)]))),128))]))}},[["__scopeId","data-v-67013d99"]]),F={class:"bg_HealthSurvey_color"},Y={class:"container-riskCard"},E={key:0,class:"RiskLevel"},N={class:"bar_content"},q=["value"],$={class:"bar_content-text"},z=x({__name:"NationalResult",setup(e){const l=u(!1),s=u(!1),o=u(""),m=u(null),{GetDateYYYYMMDD:b}=j(),D=u("2025-02-15T00:00:00");let g={};function x(a){return a>=75?"RiskLevel_3":a>=50?"RiskLevel_2":a<=25?"RiskLevel_1":void 0}i(()=>{D.value=b(D.value),s.value=!0});const S=_(()=>{if(!g.value)return[];const{Diabetes:a,Hypertension:t,CAD:e,Stroke:l,MACE:s}=g.value||{},o=[];return a&&(a.label="糖尿病",o.push(a)),t&&(t.label="高血壓",o.push(t)),e&&(e.label="冠心病",o.push(e)),l&&(l.label="腦中風",o.push(l)),s&&(s.label="心血管不良事件",o.push(s)),o});return(e,i)=>(n(),r(p,null,[d(a,{IsShow:l.value},null,8,["IsShow"]),d(M,{ref_key:"Failedref",ref:m,IsShow:s.value,Content:o.value,onClose:e.FailedClose},null,8,["IsShow","Content","onClose"]),v("div",F,[d(t,null,{title:k(()=>[w(C(e.$route.meta.title),1)]),EvaluateDatetime:k(()=>[w(C(D.value),1)]),default:k(()=>[v("div",Y,[(n(!0),r(p,null,c(S.value,(a,t)=>(n(),r("div",{key:t,class:"riskCard"},[null!==a?(n(),r(p,{key:0},[(null==a?void 0:a.label)?(n(),r("div",E,C(a.label),1)):y("",!0),v("div",N,[v("progress",{class:f(["progress_class",x(null==a?void 0:a.Risk)]),max:100,value:null==a?void 0:a.Risk},null,10,q),v("span",$,C(null==a?void 0:a.Risk)+"%",1)]),null!==(null==a?void 0:a.PopulationAvg)?(n(),h(B,{key:1,style:{"margin-top":"10px"},ratingsNum:null==a?void 0:a.PopulationAvg},null,8,["ratingsNum"])):y("",!0)],64)):y("",!0)]))),128))]),v("button",{class:"btn btn-outline-primaryblue",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasBottom","aria-controls":"offcanvasBottom",onClick:i[0]||(i[0]=(...a)=>e.historyBtn&&e.historyBtn(...a))},"歷史數據")]),_:1}),d(A)])],64))}},[["__scopeId","data-v-dc9da519"]]);export{z as default};
