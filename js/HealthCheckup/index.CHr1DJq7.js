import{z as e,q as a,v as l,D as t,J as s,H as o,M as n,Q as d,F as i,b as r,S as c,w as u,E as m,U as v,u as p,G as b,P as y,V as f,W as g}from"../@vue/@vue.CISUW6gm.js";import{_ as h,a as x}from"../Qcode.vue_vue_type_style_index_0_scoped_15927352_lang/Qcode.vue_vue_type_style_index_0_scoped_15927352_lang.DikSI9EG.js";import{_,r as k,F as C}from"../../assets/index-BGBnUB5j.js";import"../crypto-js/crypto-js.7wHo0WA-.js";import"../EncryptStorage/EncryptStorage.CPcoWq5g.js";import{L as w}from"../Loading/Loading.Kc0FP4fC.js";import{Q as j}from"../qrcode.vue/qrcode.vue.BPvuSfSN.js";import{M as E}from"../bootstrap/bootstrap.B479eVIA.js";import{a as S,b as D,c as F,d as R,e as H,f as M}from"../user/user.C5zGgpVk.js";import{u as N}from"../date/date.okVTOcjA.js";import"../vue-router/vue-router.DzNGWVxd.js";import"../pinia/pinia.BbQN6uKc.js";import"../js-cookie/js-cookie.BXEMiIsG.js";import"../clipboard/clipboard.BDF08mEv.js";import"../vue3-lottie/vue3-lottie.CcJZhO04.js";import"../lottie-web/lottie-web.CrP6allm.js";import"../@popperjs/@popperjs.CDLgd9d9.js";import"../encrypt-storage/encrypt-storage.Bu0T6VU1.js";import"../request/request.Jk5zdvv2.js";import"../axios/axios.CmLmLvTV.js";import"../moment/moment.gyA2PHTf.js";const L={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},I={class:"modal-content"},Q={class:"modal-body text-center"},U=_({__name:"Qcode",props:{CodeName:{type:String,default:""}},emits:["IsView"],setup(c,{expose:u,emit:m}){const v=r(null),p=r(null),b=r(!0),y=r(262),f=r(null),g=m;function x(){g("Refrush")}window.innerWidth<575&&(y.value=200),e(()=>{p.value=new E(v.value)});const _=()=>{p.value.hide(),k.push({name:"schedule"})};return u({myModal_show:()=>{p.value.show()},myModal_hide:_}),(e,r)=>(a(),l(i,null,[(a(),t(d,{to:"body"},[s("div",{class:"modal fade",ref_key:"modal",ref:v},[s("div",L,[s("div",I,[r[1]||(r[1]=s("div",{class:"modal-header"},[s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),s("div",Q,[r[0]||(r[0]=s("h4",null,"請至聯新國際醫院門診大樓地下一樓聯新尊爵健康會館完成報到!",-1)),o(j,{class:"img_qrcode",value:c.CodeName.QrCode,size:y.value,level:"H"},null,8,["value","size"]),s("div",null,n(c.CodeName.QrCode),1),o(h,{ref_key:"timerComp",ref:f,onUpdate:x},null,512)]),s("div",{class:"modal-footer text-center"},[s("button",{type:"button",class:"btn btn-primary mx-auto",style:{width:"300px"},onClick:_},"返回")])])])],512)])),o(w,{IsShow:b.value},null,8,["IsShow"])],64))}},[["__scopeId","data-v-15927352"]]),q={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},P={class:"modal-content"},z={class:"modal-body"},A=["href"],W=["href"],Y=_({__name:"Model",props:{list:{type:Array,default:()=>[]},ExamReport:{type:Array,default:()=>[]}},setup(o,{expose:u}){const m=r(null),v=r(null);e(()=>{v.value=new E(m.value)});return u({myModal_show:()=>{v.value.show()},myModal_hide:()=>{v.value.hide()}}),(e,r)=>(a(),t(d,{to:"body"},[s("div",{class:"modal fade",tabindex:"-1",ref_key:"modal",ref:m},[s("div",q,[s("div",P,[r[0]||(r[0]=s("div",{class:"modal-header"},[s("h5",{class:"modal-title"},"查看健檢報告"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),s("div",z,[(a(!0),l(i,null,c(o.list,e=>(a(),l("ul",{class:"list-unstyled",key:e.FileUrl},[s("li",null,[e.FileUrl?(a(),l("a",{key:0,href:e.FileUrl,alt:"item.FileName"},n(e.PackageName),9,A)):(a(),l("a",{key:1,href:o.ExamReport,alt:"item.FileName"},n(e.PackageName),9,W))])]))),128))]),r[1]||(r[1]=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-outline-secondary btn_modalClose","data-bs-dismiss":"modal"},"取消")],-1))])])],512)]))}},[["__scopeId","data-v-638695f9"]]),G={class:"card card-lg card-shadow"},O={id:"content",role:"main"},J={class:"container p-3 pt-0 pb-0"},V={class:"mx-lg-auto"},K={class:"nav nav-tabs"},B={class:"nav-item"},T={class:"nav-item"},X={class:"card-bod p-0"},Z={key:0,class:"d-flex flex-column justify-content-center align-items-center m-3 noData_container"},$={class:"py-4"},ee={class:"card-title text-dark mb-0"},ae={key:0,class:"accordion",id:"accordionPanelsStayOpenExample"},le={class:"accordion-item"},te=["id"],se=["data-bs-target","aria-controls"],oe={class:"d-flex flex-column"},ne=["id","aria-labelledby"],de={class:"row gx-2 gx-md-3 mx-3 my-2 my-md-0"},ie={class:"col-sm-12 col-lg-3 col-md-6 d-grid my-2 my-lg-4 mt-md-6"},re={class:"col-sm-12 col-lg-3 col-md-6 d-grid my-2 my-lg-4 mt-md-6"},ce=["onClick"],ue={class:"col-sm-12 col-lg-3 col-md-6 d-grid my-2 my-lg-4 mb-md-6"},me={key:1,class:"d-grid gap-3"},ve={class:"card"},pe={class:"card-body"},be={class:"row"},ye={class:"row"},fe={class:"col-10 col-md-6"},ge={class:"text-body"},he={class:"text-body"},xe={class:"col-auto text-sm-end position-absolute end-0"},_e=["onClick"],ke=["href"],Ce=_({__name:"index",setup(t){const{GetDateYYYYMMDD:d}=N(),h=r([]),_=r([]),k=r("current"),w=r(!0),j=r(!1),E=r(""),L=r([]),I=r(""),Q=r(!1),q=r(""),P=r(null),z=r(null);e(()=>{"current"==k.value?(E.value="最新健檢行程",w.value=!0,j.value=!1,W()):"History"==k.value&&(E.value="歷史健檢行程",w.value=!1,j.value=!0,Ee())}),u(k,e=>{"current"==e?(E.value="最新健檢行程",w.value=!0,j.value=!1,W()):"History"==e&&(E.value="歷史健檢行程",w.value=!1,j.value=!0,Ee())});let A={};S(A).then(e=>{const{code:a,data:l}=e;0===a&&(l.HasCurrent&&l.HasHistory?(w.value=!0,E.value="最新健檢行程"):!l.HasCurrent&&l.HasHistory?(j.value=!0,w.value=!1,E.value="歷史健檢行程"):(w.value=!0,E.value="最新健檢行程"))});const W=()=>{D(A).then(e=>{const{code:a,data:l,message:t}=e;0===a?w.value&&(h.value=l.sort((e,a)=>new Date(a.ExamDate)-new Date(e.ExamDate))):(Q.value=!0,q.value=t)})};function Ce(e){Q.value=e}const we=r("");let je={ExamCode:"",FileName:""};const Ee=()=>{F(A).then(e=>{const{code:a,data:l,message:t}=e;0==a?j&&(_.value=l.sort((e,a)=>new Date(a.ExamDate)-new Date(e.ExamDate)),_.value.forEach(e=>{console.log(e,e),e.ReportList&&e.ReportList.forEach(a=>{a.FileUrl?(we.value=[],we.value.push("http://192.168.26.194/LandSeed.HealthMemberWebApi"+a.FileUrl)):je={ExamCode:e.ExamCode,FileName:a.FileName}})})):(Q.value=!0,q.value=t)})},Se=()=>{H(je).then(e=>{const{code:a,data:l,message:t}=e;0==a?window.open("http://192.168.26.194/LandSeed.HealthMemberWebApi"+l,"_blank"):(Q.value=!0,q.value=t)})},De=(e,a)=>a?"#panelsStayOpen-"+e:"panelsStayOpen-"+e,Fe=(e,a)=>a?"#heading-"+e:"heading-"+e,Re=()=>{M({PreQrCode:null}).then(e=>{const{code:a,data:l,message:t}=e;0==a?(I.value=l,console.log(l,"data")):(Q.value=!0,q.value=t)})},He=r(null);let Me=0;const Ne=e=>{Me++,He.value.myModal_show(),Me<=1&&Re()};function Le(){Re()}return(e,t)=>{const r=m("router-link");return a(),l(i,null,[s("div",G,[s("main",O,[s("section",J,[s("div",V,[s("ul",K,[s("li",B,[s("a",{onClick:t[0]||(t[0]=e=>k.value="current"),class:v(["nav-link",{active:w.value}]),href:"#"},"最近健檢行程",2)]),s("li",T,[s("a",{onClick:t[1]||(t[1]=e=>k.value="History"),class:v(["nav-link",{active:j.value}]),href:"#"},"歷史健檢行程",2)])]),s("div",X,[0==h.value.length?(a(),l("div",Z,[...t[2]||(t[2]=[s("img",{src:x,alt:"您目前沒有預約紀錄",class:"img_noData"},null,-1),s("div",{class:"mt-3"},"您目前沒有預約紀錄",-1)])])):(a(),l(i,{key:1},[s("div",$,[s("h4",ee,n(E.value),1)]),w.value?(a(),l("div",ae,[(a(!0),l(i,null,c(h.value,(e,i)=>(a(),l("div",le,[s("h2",{class:"accordion-header",id:Fe(i)},[s("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":De(i,e),"aria-expanded":"true","aria-controls":De(i)},[s("div",oe,[s("div",null,n(p(d)(e.ExamDate)),1),s("div",null,n(e.PackageName),1)])],8,se)],8,te),s("div",{id:De(i),class:"bg-white accordion-collapse collapse","aria-labelledby":Fe(i,e)},[s("div",de,[s("div",ie,[o(r,{class:"btn btn-outline-primary",to:{name:"Confirm",query:{ExamCode:e.ExamCode,Status:e.Status}}},{default:b(()=>[...t[3]||(t[3]=[y("行前資料確認",-1)])]),_:1},8,["to"])]),s("div",re,[s("button",{onClick:a=>(e=>{let a={ExamCode:e};R(a).then(e=>{const{code:l,data:t,message:s}=e;console.log(a,"paramSurvey"),0==l?window.open(t,"_blank"):(Q.value=!0,q.value=s)})})(e.ExamCode),type:"button",class:"btn btn-outline-primary"},"問卷專區",8,ce)]),s("div",{class:"col-sm-12 col-lg-3 col-md-6 d-grid my-2 my-lg-4 mb-md-6"},[s("button",{type:"button",class:"btn btn-outline-primary",onClick:Ne},"健檢報到")]),s("div",ue,[o(r,{type:"button",class:"btn btn-outline-primary",onClick:a=>{1==e.Status&&(Me++,He.value.myModal_show(),Me<=1&&Re())},to:{name:"CheckItem",query:{ExamCode:e.ExamCode,Status:e.Status}}},{default:b(()=>[...t[4]||(t[4]=[y("健檢行程總覽",-1)])]),_:1},8,["onClick","to"])])])],8,ne)]))),256))])):f("",!0),j.value?(a(),l("div",me,[(a(!0),l(i,null,c(_.value,(e,o)=>(a(),l("a",ve,[s("div",pe,[s("div",be,[t[8]||(t[8]=s("div",{class:"col-12 mb-2"},[s("span",{class:"badge btn-soft-info rounded-pill px-3 fs-4"},"尊爵健檢")],-1)),s("div",ye,[s("div",fe,[s("div",ge,n(p(d)(e.ExamDate)),1),s("div",he,n(e.PackageName),1)]),s("div",xe,[null!==e.ReportList?(a(),l(i,{key:0},[e.ReportList.length>1?(a(),l("a",{key:0,class:"btn btn-link link fw-bold",target:"_blank",onClick:g(a=>{return l=e.ReportList,L.value=l,void z.value.myModal_show();var l},["prevent"])},[...t[5]||(t[5]=[y("看報告",-1),s("i",{class:"bi-chevron-right mx-2"},null,-1)])],8,_e)):(a(),l(i,{key:1},[e.ReportList[0].FileUrl?(a(),l("a",{key:0,href:e.ReportList[0].FileUrl,class:"btn btn-link link fw-bold",target:"_blank"},[...t[6]||(t[6]=[y("看報告",-1),s("i",{class:"bi-chevron-right mx-2"},null,-1)])],8,ke)):(a(),l("button",{key:1,onClick:Se,class:"btn btn-link"},[...t[7]||(t[7]=[y(" 看報告",-1),s("i",{class:"bi-chevron-right mx-2"},null,-1)])]))],64))],64)):f("",!0)])])])])]))),256))])):f("",!0)],64)),t[9]||(t[9]=s("div",{class:"pt-3"},[s("div",{class:"alert alert-soft-primary d-flex flex-column flex-md-row align-items-center",role:"alert",style:{"padding-top":"24px","padding-bottom":"24px"}},[s("div",{class:"me-md-4 align-self-start align-self-md-center mb-3 mb-md-0",style:{"font-weight":"900",color:"#252525","font-size":"20px"}}," 預約健檢 "),s("div",{class:"align-self-start align-self-md-center",style:{color:"#252525","font-size":"16px"}},[s("div",{class:"d-flex flex-md-row flex-column"},[s("div",null,"預約諮詢專線："),s("div",null,"(03)283-1308、(03)283-1266")]),s("div",null,"服務時間：週一至週五08:00-17:00"),s("div",{class:"text-indent"},"週六08:00-12:00(國定假日除外)")])])],-1))])])])])]),o(Y,{ref_key:"modalRef",ref:z,list:L.value,ExamReport:we.value},null,8,["list","ExamReport"]),o(U,{ref_key:"QcodeRef",ref:He,CodeName:I.value,onRefrush:Le},null,8,["CodeName"]),o(C,{ref_key:"Failedref",ref:P,IsShow:Q.value,Content:q.value,onClose:Ce},null,8,["IsShow","Content"])],64)}}},[["__scopeId","data-v-c0ba5515"]]);export{Ce as default};
